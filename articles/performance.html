<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Performance comparison with other functional diversity packages • fundiversity</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Performance comparison with other functional diversity packages">
<meta property="og:description" content="fundiversity">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fundiversity</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/fundiversity.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/performance.html">Performance comparison with other functional diversity packages</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="performance_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Performance comparison with other functional diversity packages</h1>
            
      
      
      <div class="hidden name"><code>performance.Rmd</code></div>

    </div>

    
    
<p>This vignette presents some performance tests ran between <code>fundiversity</code> and other functional diversity packages. Note that to avoid the dependency on other packages, this vignette is <a href="https://ropensci.org/technotes/2019/12/08/precompute-vignettes/"><strong>pre-computed</strong></a>.</p>
<div id="other-packages-to-compute-fd-indices" class="section level1">
<h1 class="hasAnchor">
<a href="#other-packages-to-compute-fd-indices" class="anchor"></a>Other packages to compute FD indices</h1>
<div id="main-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#main-functions" class="anchor"></a>Main functions</h2>
<p><strong><code>FD::dbFD()</code></strong> is probably the most known function to compute functional diversity indices. It comes from the <code>FD</code> package proposed by <span class="citation">Laliberté, Legendre, and Shipley (2014)</span>. It can compute many indices: functional richness, Rao’s quadratic entropy, community-weighted mean, functional divergence, functional dispersion, and functional group richness. This swiss-army knife of functional diversity indices has many options and compute several indices in a single run.</p>
<p><strong><code>hillR::hill_func()</code></strong> comes from the <code>hillR</code> package that computes Hill numbers for taxonomic, functional, and functional diversity <span class="citation">(Li 2018)</span>. It implements indices proposed by <span class="citation">Chao, Chiu, and Jost (2014)</span>. It computes Rao’s quadratic entropy, the mean functional diversity per species, as well as the total functional diversity.</p>
<p><strong><code>adiv::QE()</code></strong> comes from the <code>adiv</code> package which proposes a toolkit to analyze biodiversity <span class="citation">(Pavoine 2020)</span>. This function computes Rao’s quadratic entropy.</p>
<p><strong><code>SYNCSA::rao.diversity()</code></strong> comes from <code>SYNCSA</code> package which proposes a simulation framework for meta-communities <span class="citation">(Debastiani and Pillar 2012)</span>. The function computes Rao’s quadratic entropy as well as functional redundancy.</p>
</div>
<div id="benchmark-between-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#benchmark-between-packages" class="anchor"></a>Benchmark between packages</h2>
<p>We will now benchmark the functions included in <code>fundiversity</code> with the corresponding function in other packages using the <code>microbenchmark::microbenchmark()</code> function.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tictoc</span><span class="fu">::</span><span class="fu">tic</span><span class="op">(</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">fundiversity</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"traits_birds"</span>, package <span class="op">=</span> <span class="st">"fundiversity"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"site_sp_birds"</span>, package <span class="op">=</span> <span class="st">"fundiversity"</span><span class="op">)</span>

<span class="va">dist_traits_birds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/dist.html">dist</a></span><span class="op">(</span><span class="va">traits_birds</span><span class="op">)</span></code></pre></div>
<p>With the fairly small (~220 species, 8 sites, 4 traits) provided dataset in <code>fundiversity</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pkg_bench</span> <span class="op">&lt;-</span> <span class="fu">microbenchmark</span><span class="fu">::</span><span class="fu">microbenchmark</span><span class="op">(</span>
  fundiversity <span class="op">=</span> <span class="op">{</span>
    <span class="fu">fundiversity</span><span class="fu">::</span><span class="fu"><a href="../reference/fd_raoq.html">fd_raoq</a></span><span class="op">(</span>traits <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">site_sp_birds</span>, <span class="va">dist_traits_birds</span><span class="op">)</span>
  <span class="op">}</span>,
  adiv <span class="op">=</span> <span class="op">{</span>
    <span class="fu">adiv</span><span class="fu">::</span><span class="fu">QE</span><span class="op">(</span><span class="va">site_sp_birds</span>, dis <span class="op">=</span> <span class="va">dist_traits_birds</span><span class="op">)</span>
  <span class="op">}</span>,
  hillR <span class="op">=</span> <span class="op">{</span>
    <span class="fu">hillR</span><span class="fu">::</span><span class="fu">hill_func</span><span class="op">(</span><span class="va">site_sp_birds</span>, <span class="va">dist_traits_birds</span>, traits_as_is <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span>
  <span class="op">}</span>,
  SYNCSA <span class="op">=</span> <span class="op">{</span>
    <span class="fu">SYNCSA</span><span class="fu">::</span><span class="fu">rao.diversity</span><span class="op">(</span><span class="va">site_sp_birds</span>,
                          phylodist <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">dist_traits_birds</span><span class="op">)</span>,
                          standardize <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">$</span><span class="va">PhyRao</span>
  <span class="op">}</span>,
  FD <span class="op">=</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/message.html">suppressMessages</a></span><span class="op">(</span>
      <span class="fu">FD</span><span class="fu">::</span><span class="fu">dbFD</span><span class="op">(</span>x <span class="op">=</span> <span class="va">dist_traits_birds</span>, a <span class="op">=</span> <span class="va">site_sp_birds</span>, stand.x <span class="op">=</span> <span class="cn">FALSE</span>,
               calc.FRic <span class="op">=</span> <span class="cn">TRUE</span>, calc.CWM <span class="op">=</span> <span class="cn">FALSE</span>, calc.FDiv <span class="op">=</span> <span class="cn">FALSE</span>,
               calc.FGR <span class="op">=</span> <span class="cn">FALSE</span>, m <span class="op">=</span> <span class="st">"max"</span>, stand.FRic <span class="op">=</span> <span class="cn">FALSE</span>,
               messages <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>
  <span class="op">}</span>,
  times <span class="op">=</span> <span class="fl">30</span>
<span class="op">)</span>
<span class="co">#&gt; Error in loadNamespace(name): there is no package called 'SYNCSA'</span>

<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">autoplot</span><span class="op">(</span><span class="va">pkg_bench</span><span class="op">)</span>
<span class="co">#&gt; Error in ggplot2::autoplot(pkg_bench): object 'pkg_bench' not found</span>
<span class="va">pkg_bench</span>
<span class="co">#&gt; Error in eval(expr, envir, enclos): object 'pkg_bench' not found</span></code></pre></div>
</div>
</div>
<div id="benchmark-within-fundiversity" class="section level1">
<h1 class="hasAnchor">
<a href="#benchmark-within-fundiversity" class="anchor"></a>Benchmark within <code>fundiversity</code>
</h1>
<p>We now proceed to the performance evaluation of functions within <code>fundiversity</code> with datasets of increasing sizes.</p>
<div id="increasing-the-number-of-species" class="section level2">
<h2 class="hasAnchor">
<a href="#increasing-the-number-of-species" class="anchor"></a>Increasing the number of species</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">make_more_sp</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">traits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">replicate</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">traits_birds</span>, simplify <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span><span class="op">(</span><span class="va">traits</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"sp"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">traits</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

  <span class="va">site_sp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span><span class="op">(</span><span class="va">cbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">replicate</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">site_sp_birds</span>, simplify <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">site_sp</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"sp"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">site_sp</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>tr <span class="op">=</span> <span class="va">traits</span>, si <span class="op">=</span> <span class="va">site_sp</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">null_sp_1000</span>   <span class="op">&lt;-</span> <span class="fu">make_more_sp</span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>
<span class="va">null_sp_10000</span>  <span class="op">&lt;-</span> <span class="fu">make_more_sp</span><span class="op">(</span><span class="fl">50</span><span class="op">)</span>
<span class="va">null_sp_100000</span> <span class="op">&lt;-</span> <span class="fu">make_more_sp</span><span class="op">(</span><span class="fl">500</span><span class="op">)</span></code></pre></div>
<div id="functional-richness" class="section level3">
<h3 class="hasAnchor">
<a href="#functional-richness" class="anchor"></a>Functional Richness</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bench_sp_fric</span> <span class="op">&lt;-</span> <span class="fu">microbenchmark</span><span class="fu">::</span><span class="fu">microbenchmark</span><span class="op">(</span>
  species_200    <span class="op">=</span> <span class="fu"><a href="../reference/fd_fric.html">fd_fric</a></span><span class="op">(</span>     <span class="va">traits_birds</span>, <span class="va">site_sp_birds</span><span class="op">)</span>,
  species_1000   <span class="op">=</span> <span class="fu"><a href="../reference/fd_fric.html">fd_fric</a></span><span class="op">(</span>  <span class="va">null_sp_1000</span><span class="op">$</span><span class="va">tr</span>, <span class="va">null_sp_1000</span><span class="op">$</span><span class="va">si</span><span class="op">)</span>,
  species_10000  <span class="op">=</span> <span class="fu"><a href="../reference/fd_fric.html">fd_fric</a></span><span class="op">(</span> <span class="va">null_sp_10000</span><span class="op">$</span><span class="va">tr</span>, <span class="va">null_sp_10000</span><span class="op">$</span><span class="va">si</span><span class="op">)</span>,
  species_100000 <span class="op">=</span> <span class="fu"><a href="../reference/fd_fric.html">fd_fric</a></span><span class="op">(</span><span class="va">null_sp_100000</span><span class="op">$</span><span class="va">tr</span>, <span class="va">null_sp_100000</span><span class="op">$</span><span class="va">si</span><span class="op">)</span>,
  times <span class="op">=</span> <span class="fl">30</span>
<span class="op">)</span>

<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">autoplot</span><span class="op">(</span><span class="va">bench_sp_fric</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="fd-bench-species-fric-1.png" alt=""><p class="caption">Performance comparison of <code><a href="../reference/fd_fric.html">fd_fric()</a></code> with increasing number of species.</p>
</div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bench_sp_fric</span>
<span class="co">#&gt; Unit: milliseconds</span>
<span class="co">#&gt;            expr        min         lq       mean     median         uq</span>
<span class="co">#&gt;     species_200   11.94163   12.19529   13.48379   12.72595   13.61104</span>
<span class="co">#&gt;    species_1000   23.24416   24.04046   27.87304   28.72615   30.89678</span>
<span class="co">#&gt;   species_10000  154.62091  171.24008  205.79773  200.73744  232.02286</span>
<span class="co">#&gt;  species_100000 1982.38767 2172.20247 2320.63872 2297.73992 2396.25229</span>
<span class="co">#&gt;         max neval</span>
<span class="co">#&gt;    23.61593    30</span>
<span class="co">#&gt;    36.27568    30</span>
<span class="co">#&gt;   359.15593    30</span>
<span class="co">#&gt;  2787.58887    30</span></code></pre></div>
</div>
<div id="functional-divergence" class="section level3">
<h3 class="hasAnchor">
<a href="#functional-divergence" class="anchor"></a>Functional Divergence</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bench_sp_fdiv</span> <span class="op">&lt;-</span> <span class="fu">microbenchmark</span><span class="fu">::</span><span class="fu">microbenchmark</span><span class="op">(</span>
  species_200    <span class="op">=</span> <span class="fu"><a href="../reference/fd_fdiv.html">fd_fdiv</a></span><span class="op">(</span>     <span class="va">traits_birds</span>, <span class="va">site_sp_birds</span><span class="op">)</span>,
  species_1000   <span class="op">=</span> <span class="fu"><a href="../reference/fd_fdiv.html">fd_fdiv</a></span><span class="op">(</span>  <span class="va">null_sp_1000</span><span class="op">$</span><span class="va">tr</span>, <span class="va">null_sp_1000</span><span class="op">$</span><span class="va">si</span><span class="op">)</span>,
  species_10000  <span class="op">=</span> <span class="fu"><a href="../reference/fd_fdiv.html">fd_fdiv</a></span><span class="op">(</span> <span class="va">null_sp_10000</span><span class="op">$</span><span class="va">tr</span>, <span class="va">null_sp_10000</span><span class="op">$</span><span class="va">si</span><span class="op">)</span>,
  species_100000 <span class="op">=</span> <span class="fu"><a href="../reference/fd_fdiv.html">fd_fdiv</a></span><span class="op">(</span><span class="va">null_sp_100000</span><span class="op">$</span><span class="va">tr</span>, <span class="va">null_sp_100000</span><span class="op">$</span><span class="va">si</span><span class="op">)</span>,
  times <span class="op">=</span> <span class="fl">30</span>
<span class="op">)</span>

<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">autoplot</span><span class="op">(</span><span class="va">bench_sp_fdiv</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="fd-bench-species-fdiv-1.png" alt=""><p class="caption">Performance comparison of <code><a href="../reference/fd_fdiv.html">fd_fdiv()</a></code> with increasing number of species.</p>
</div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bench_sp_fdiv</span>
<span class="co">#&gt; Unit: milliseconds</span>
<span class="co">#&gt;            expr        min         lq       mean     median         uq</span>
<span class="co">#&gt;     species_200   1.416353   1.433241   1.489207   1.477628   1.503187</span>
<span class="co">#&gt;    species_1000   2.617529   2.674886   2.710100   2.707212   2.729068</span>
<span class="co">#&gt;   species_10000  16.550674  16.698951  19.889884  16.865887  24.042713</span>
<span class="co">#&gt;  species_100000 225.332404 237.527155 279.593271 250.171127 362.922045</span>
<span class="co">#&gt;         max neval</span>
<span class="co">#&gt;    2.006099    30</span>
<span class="co">#&gt;    2.958973    30</span>
<span class="co">#&gt;   24.203279    30</span>
<span class="co">#&gt;  375.404459    30</span></code></pre></div>
</div>
<div id="raos-quadratric-entropy" class="section level3">
<h3 class="hasAnchor">
<a href="#raos-quadratric-entropy" class="anchor"></a>Rao’s Quadratric Entropy</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bench_sp_raoq</span> <span class="op">&lt;-</span> <span class="fu">microbenchmark</span><span class="fu">::</span><span class="fu">microbenchmark</span><span class="op">(</span>
  species_200    <span class="op">=</span> <span class="fu"><a href="../reference/fd_raoq.html">fd_raoq</a></span><span class="op">(</span>     <span class="va">traits_birds</span>, <span class="va">site_sp_birds</span><span class="op">)</span>,
  species_1000   <span class="op">=</span> <span class="fu"><a href="../reference/fd_raoq.html">fd_raoq</a></span><span class="op">(</span>  <span class="va">null_sp_1000</span><span class="op">$</span><span class="va">tr</span>, <span class="va">null_sp_1000</span><span class="op">$</span><span class="va">si</span><span class="op">)</span>,
  species_10000  <span class="op">=</span> <span class="fu"><a href="../reference/fd_raoq.html">fd_raoq</a></span><span class="op">(</span> <span class="va">null_sp_10000</span><span class="op">$</span><span class="va">tr</span>, <span class="va">null_sp_10000</span><span class="op">$</span><span class="va">si</span><span class="op">)</span>,
  times <span class="op">=</span> <span class="fl">30</span>
<span class="op">)</span>

<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">autoplot</span><span class="op">(</span><span class="va">bench_sp_raoq</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="fd-bench-species-raoq-1.png" alt=""><p class="caption">Performance comparison of <code><a href="../reference/fd_raoq.html">fd_raoq()</a></code> with increasing number of species.</p>
</div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bench_sp_raoq</span>
<span class="co">#&gt; Unit: milliseconds</span>
<span class="co">#&gt;           expr          min           lq         mean       median           uq</span>
<span class="co">#&gt;    species_200     3.242942     3.400784     3.580842     3.645827     3.707542</span>
<span class="co">#&gt;   species_1000    94.105555    95.515871   102.977814   104.885028   107.309527</span>
<span class="co">#&gt;  species_10000 13994.265970 14293.567319 14531.776206 14423.505294 14787.260527</span>
<span class="co">#&gt;           max neval</span>
<span class="co">#&gt;      3.889752    30</span>
<span class="co">#&gt;    131.239075    30</span>
<span class="co">#&gt;  15654.493712    30</span></code></pre></div>
</div>
<div id="functional-evenness" class="section level3">
<h3 class="hasAnchor">
<a href="#functional-evenness" class="anchor"></a>Functional Evenness</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bench_sp_feve</span> <span class="op">&lt;-</span> <span class="fu">microbenchmark</span><span class="fu">::</span><span class="fu">microbenchmark</span><span class="op">(</span>
  species_200    <span class="op">=</span> <span class="fu"><a href="../reference/fd_feve.html">fd_feve</a></span><span class="op">(</span>     <span class="va">traits_birds</span>, <span class="va">site_sp_birds</span><span class="op">)</span>,
  species_1000   <span class="op">=</span> <span class="fu"><a href="../reference/fd_feve.html">fd_feve</a></span><span class="op">(</span>  <span class="va">null_sp_1000</span><span class="op">$</span><span class="va">tr</span>, <span class="va">null_sp_1000</span><span class="op">$</span><span class="va">si</span><span class="op">)</span>,
  species_10000  <span class="op">=</span> <span class="fu"><a href="../reference/fd_feve.html">fd_feve</a></span><span class="op">(</span> <span class="va">null_sp_10000</span><span class="op">$</span><span class="va">tr</span>, <span class="va">null_sp_10000</span><span class="op">$</span><span class="va">si</span><span class="op">)</span>,
  times <span class="op">=</span> <span class="fl">30</span>
<span class="op">)</span>

<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">autoplot</span><span class="op">(</span><span class="va">bench_sp_feve</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="fd-bench-species-feve-1.png" alt=""><p class="caption">Performance comparison of <code><a href="../reference/fd_feve.html">fd_feve()</a></code> with increasing number of species.</p>
</div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bench_sp_feve</span>
<span class="co">#&gt; Unit: milliseconds</span>
<span class="co">#&gt;           expr         min          lq        mean     median          uq</span>
<span class="co">#&gt;    species_200    13.70024    15.42278    16.74874    16.1566    16.48126</span>
<span class="co">#&gt;   species_1000   212.16364   267.10581   275.68598   280.1180   296.72434</span>
<span class="co">#&gt;  species_10000 31083.13817 36516.55153 37315.26687 37215.7514 37667.65145</span>
<span class="co">#&gt;          max neval</span>
<span class="co">#&gt;     37.15466    30</span>
<span class="co">#&gt;    329.70134    30</span>
<span class="co">#&gt;  46772.69790    30</span></code></pre></div>
</div>
<div id="comparing-between-indices" class="section level3">
<h3 class="hasAnchor">
<a href="#comparing-between-indices" class="anchor"></a>Comparing between indices</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">all_bench_sp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>fric <span class="op">=</span> <span class="va">bench_sp_fric</span>,
                     fdiv <span class="op">=</span> <span class="va">bench_sp_fdiv</span>,
                     raoq <span class="op">=</span> <span class="va">bench_sp_raoq</span>,
                     feve <span class="op">=</span> <span class="va">bench_sp_feve</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">bind_rows</span><span class="op">(</span>.id <span class="op">=</span> <span class="st">"fd_index"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>n_sp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"species_"</span>, <span class="st">""</span>, <span class="va">expr</span><span class="op">)</span> <span class="op">%&gt;%</span>
           <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>

<span class="va">all_bench_sp</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">n_sp</span>, <span class="va">time</span> <span class="op">*</span> <span class="fl">1e-9</span>, color <span class="op">=</span> <span class="va">fd_index</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">3</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_smooth</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_x_log10</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_y_log10</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_color_brewer</span><span class="op">(</span>type <span class="op">=</span> <span class="st">"qual"</span>,
                     labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>fric <span class="op">=</span> <span class="st">"FRic"</span>, fdiv <span class="op">=</span> <span class="st">"FDiv"</span>, raoq <span class="op">=</span> <span class="st">"Rao's Q"</span>,
                                feve <span class="op">=</span> <span class="st">"FEve"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Performance comparison between indices"</span>,
       x <span class="op">=</span> <span class="st">"# of species"</span>, y <span class="op">=</span> <span class="st">"Time (in seconds)"</span>,
       color <span class="op">=</span> <span class="st">"FD index"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>aspect.ratio <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<pre class="collapsable-warnings"><code>#&gt; Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
#&gt; parametric, : pseudoinverse used at 2.2875</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
#&gt; parametric, : neighborhood radius 1.7125</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
#&gt; parametric, : reciprocal condition number 3.2033e-17</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
#&gt; parametric, : There are other near singularities as well. 4.0542</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in predLoess(object$y, object$x, newx = if
#&gt; (is.null(newdata)) object$x else if (is.data.frame(newdata))
#&gt; as.matrix(model.frame(delete.response(terms(object)), : pseudoinverse used at
#&gt; 2.2875</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in predLoess(object$y, object$x, newx = if
#&gt; (is.null(newdata)) object$x else if (is.data.frame(newdata))
#&gt; as.matrix(model.frame(delete.response(terms(object)), : neighborhood radius
#&gt; 1.7125</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in predLoess(object$y, object$x, newx = if
#&gt; (is.null(newdata)) object$x else if (is.data.frame(newdata))
#&gt; as.matrix(model.frame(delete.response(terms(object)), : reciprocal condition
#&gt; number 3.2033e-17</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in predLoess(object$y, object$x, newx = if
#&gt; (is.null(newdata)) object$x else if (is.data.frame(newdata))
#&gt; as.matrix(model.frame(delete.response(terms(object)), : There are other near
#&gt; singularities as well. 4.0542</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
#&gt; parametric, : pseudoinverse used at 2.2925</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
#&gt; parametric, : neighborhood radius 1.7075</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
#&gt; parametric, : reciprocal condition number 0</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
#&gt; parametric, : There are other near singularities as well. 2.9154</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in predLoess(object$y, object$x, newx = if
#&gt; (is.null(newdata)) object$x else if (is.data.frame(newdata))
#&gt; as.matrix(model.frame(delete.response(terms(object)), : pseudoinverse used at
#&gt; 2.2925</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in predLoess(object$y, object$x, newx = if
#&gt; (is.null(newdata)) object$x else if (is.data.frame(newdata))
#&gt; as.matrix(model.frame(delete.response(terms(object)), : neighborhood radius
#&gt; 1.7075</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in predLoess(object$y, object$x, newx = if
#&gt; (is.null(newdata)) object$x else if (is.data.frame(newdata))
#&gt; as.matrix(model.frame(delete.response(terms(object)), : reciprocal condition
#&gt; number 0</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in predLoess(object$y, object$x, newx = if
#&gt; (is.null(newdata)) object$x else if (is.data.frame(newdata))
#&gt; as.matrix(model.frame(delete.response(terms(object)), : There are other near
#&gt; singularities as well. 2.9154</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
#&gt; parametric, : pseudoinverse used at 2.2875</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
#&gt; parametric, : neighborhood radius 1.7125</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
#&gt; parametric, : reciprocal condition number 6.52e-17</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
#&gt; parametric, : There are other near singularities as well. 4.0542</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in predLoess(object$y, object$x, newx = if
#&gt; (is.null(newdata)) object$x else if (is.data.frame(newdata))
#&gt; as.matrix(model.frame(delete.response(terms(object)), : pseudoinverse used at
#&gt; 2.2875</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in predLoess(object$y, object$x, newx = if
#&gt; (is.null(newdata)) object$x else if (is.data.frame(newdata))
#&gt; as.matrix(model.frame(delete.response(terms(object)), : neighborhood radius
#&gt; 1.7125</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in predLoess(object$y, object$x, newx = if
#&gt; (is.null(newdata)) object$x else if (is.data.frame(newdata))
#&gt; as.matrix(model.frame(delete.response(terms(object)), : reciprocal condition
#&gt; number 6.52e-17</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in predLoess(object$y, object$x, newx = if
#&gt; (is.null(newdata)) object$x else if (is.data.frame(newdata))
#&gt; as.matrix(model.frame(delete.response(terms(object)), : There are other near
#&gt; singularities as well. 4.0542</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
#&gt; parametric, : pseudoinverse used at 2.2925</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
#&gt; parametric, : neighborhood radius 1.7075</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
#&gt; parametric, : reciprocal condition number 6.5476e-17</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
#&gt; parametric, : There are other near singularities as well. 2.9154</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in predLoess(object$y, object$x, newx = if
#&gt; (is.null(newdata)) object$x else if (is.data.frame(newdata))
#&gt; as.matrix(model.frame(delete.response(terms(object)), : pseudoinverse used at
#&gt; 2.2925</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in predLoess(object$y, object$x, newx = if
#&gt; (is.null(newdata)) object$x else if (is.data.frame(newdata))
#&gt; as.matrix(model.frame(delete.response(terms(object)), : neighborhood radius
#&gt; 1.7075</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in predLoess(object$y, object$x, newx = if
#&gt; (is.null(newdata)) object$x else if (is.data.frame(newdata))
#&gt; as.matrix(model.frame(delete.response(terms(object)), : reciprocal condition
#&gt; number 6.5476e-17</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning in predLoess(object$y, object$x, newx = if
#&gt; (is.null(newdata)) object$x else if (is.data.frame(newdata))
#&gt; as.matrix(model.frame(delete.response(terms(object)), : There are other near
#&gt; singularities as well. 2.9154</code></pre>
<div class="figure">
<img src="fd-bench-species-compare-1.png" alt=""><p class="caption">Performance comparison between functions for distinct indices in <code>fundiversity</code> with increasing number of species. Smoothed trend lines and standard error enveloppes ares shown.</p>
</div>
</div>
</div>
<div id="increasing-the-number-of-sites" class="section level2">
<h2 class="hasAnchor">
<a href="#increasing-the-number-of-sites" class="anchor"></a>Increasing the number of sites</h2>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">make_more_sites</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">site_sp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">replicate</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">site_sp_birds</span>, simplify <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">site_sp</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"s"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">site_sp</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

  <span class="va">site_sp</span>
<span class="op">}</span>

<span class="va">site_sp_100</span>   <span class="op">&lt;-</span> <span class="fu">make_more_sites</span><span class="op">(</span><span class="fl">12</span><span class="op">)</span>
<span class="va">site_sp_1000</span>  <span class="op">&lt;-</span> <span class="fu">make_more_sites</span><span class="op">(</span><span class="fl">120</span><span class="op">)</span>
<span class="va">site_sp_10000</span> <span class="op">&lt;-</span> <span class="fu">make_more_sites</span><span class="op">(</span><span class="fl">1200</span><span class="op">)</span></code></pre></div>
<div id="functional-richness-1" class="section level3">
<h3 class="hasAnchor">
<a href="#functional-richness-1" class="anchor"></a>Functional Richness</h3>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bench_sites_fric</span> <span class="op">=</span> <span class="fu">microbenchmark</span><span class="fu">::</span><span class="fu">microbenchmark</span><span class="op">(</span>
  sites_10    <span class="op">=</span> <span class="fu"><a href="../reference/fd_fric.html">fd_fric</a></span><span class="op">(</span><span class="va">traits_birds</span>, <span class="va">site_sp_birds</span><span class="op">)</span>,
  sites_100   <span class="op">=</span> <span class="fu"><a href="../reference/fd_fric.html">fd_fric</a></span><span class="op">(</span><span class="va">traits_birds</span>, <span class="va">site_sp_100</span><span class="op">)</span>,
  sites_1000  <span class="op">=</span> <span class="fu"><a href="../reference/fd_fric.html">fd_fric</a></span><span class="op">(</span><span class="va">traits_birds</span>, <span class="va">site_sp_1000</span><span class="op">)</span>,
  sites_10000 <span class="op">=</span> <span class="fu"><a href="../reference/fd_fric.html">fd_fric</a></span><span class="op">(</span><span class="va">traits_birds</span>, <span class="va">site_sp_10000</span><span class="op">)</span>,
  times <span class="op">=</span> <span class="fl">30</span>
<span class="op">)</span>

<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">autoplot</span><span class="op">(</span><span class="va">bench_sites_fric</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="fd-bench-sites-fric-1.png" alt=""><p class="caption">Performance comparison of <code><a href="../reference/fd_fric.html">fd_fric()</a></code> with increasing number of sites.</p>
</div>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bench_sites_fric</span>
<span class="co">#&gt; Unit: milliseconds</span>
<span class="co">#&gt;         expr         min          lq        mean      median          uq</span>
<span class="co">#&gt;     sites_10    11.64133    11.75439    12.60783    12.14127    13.58912</span>
<span class="co">#&gt;    sites_100   133.63390   135.87538   152.78037   154.36716   159.21725</span>
<span class="co">#&gt;   sites_1000  1376.52729  1398.56744  1505.99374  1447.77430  1618.72073</span>
<span class="co">#&gt;  sites_10000 14263.47331 14539.84061 14809.95416 14789.74866 15158.80710</span>
<span class="co">#&gt;          max neval</span>
<span class="co">#&gt;     14.58808    30</span>
<span class="co">#&gt;    207.89332    30</span>
<span class="co">#&gt;   1843.33479    30</span>
<span class="co">#&gt;  15248.07553    30</span></code></pre></div>
</div>
<div id="functional-divergence-1" class="section level3">
<h3 class="hasAnchor">
<a href="#functional-divergence-1" class="anchor"></a>Functional Divergence</h3>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bench_sites_fdiv</span> <span class="op">=</span> <span class="fu">microbenchmark</span><span class="fu">::</span><span class="fu">microbenchmark</span><span class="op">(</span>
  sites_10    <span class="op">=</span> <span class="fu"><a href="../reference/fd_fdiv.html">fd_fdiv</a></span><span class="op">(</span><span class="va">traits_birds</span>, <span class="va">site_sp_birds</span><span class="op">)</span>,
  sites_100   <span class="op">=</span> <span class="fu"><a href="../reference/fd_fdiv.html">fd_fdiv</a></span><span class="op">(</span><span class="va">traits_birds</span>, <span class="va">site_sp_100</span><span class="op">)</span>,
  sites_1000  <span class="op">=</span> <span class="fu"><a href="../reference/fd_fdiv.html">fd_fdiv</a></span><span class="op">(</span><span class="va">traits_birds</span>, <span class="va">site_sp_1000</span><span class="op">)</span>,
  sites_10000 <span class="op">=</span> <span class="fu"><a href="../reference/fd_fdiv.html">fd_fdiv</a></span><span class="op">(</span><span class="va">traits_birds</span>, <span class="va">site_sp_10000</span><span class="op">)</span>,
  times <span class="op">=</span> <span class="fl">30</span>
<span class="op">)</span>

<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">autoplot</span><span class="op">(</span><span class="va">bench_sites_fdiv</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="fd-bench-sites-fdiv-1.png" alt=""><p class="caption">Performance comparison of <code><a href="../reference/fd_fdiv.html">fd_fdiv()</a></code> with increasing number of sites.</p>
</div>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bench_sites_fdiv</span>
<span class="co">#&gt; Unit: milliseconds</span>
<span class="co">#&gt;         expr         min          lq        mean      median          uq</span>
<span class="co">#&gt;     sites_10    1.414636    1.437266    1.483685    1.468797    1.499536</span>
<span class="co">#&gt;    sites_100   10.457173   10.537524   11.522428   10.620725   10.828451</span>
<span class="co">#&gt;   sites_1000   99.265907  100.420613  104.852686  101.072614  102.355416</span>
<span class="co">#&gt;  sites_10000 1023.700960 1036.591268 1058.799329 1055.754689 1064.339145</span>
<span class="co">#&gt;         max neval</span>
<span class="co">#&gt;     1.64403    30</span>
<span class="co">#&gt;    33.48174    30</span>
<span class="co">#&gt;   125.78485    30</span>
<span class="co">#&gt;  1177.02578    30</span></code></pre></div>
</div>
<div id="raos-quadratic-entropy" class="section level3">
<h3 class="hasAnchor">
<a href="#raos-quadratic-entropy" class="anchor"></a>Rao’s Quadratic Entropy</h3>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bench_sites_raoq</span> <span class="op">=</span> <span class="fu">microbenchmark</span><span class="fu">::</span><span class="fu">microbenchmark</span><span class="op">(</span>
  sites_10    <span class="op">=</span> <span class="fu"><a href="../reference/fd_raoq.html">fd_raoq</a></span><span class="op">(</span>traits <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">site_sp_birds</span>, <span class="va">dist_traits_birds</span><span class="op">)</span>,
  sites_100   <span class="op">=</span> <span class="fu"><a href="../reference/fd_raoq.html">fd_raoq</a></span><span class="op">(</span>traits <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">site_sp_100</span>,   <span class="va">dist_traits_birds</span><span class="op">)</span>,
  sites_1000  <span class="op">=</span> <span class="fu"><a href="../reference/fd_raoq.html">fd_raoq</a></span><span class="op">(</span>traits <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">site_sp_1000</span>,  <span class="va">dist_traits_birds</span><span class="op">)</span>,
  sites_10000 <span class="op">=</span> <span class="fu"><a href="../reference/fd_raoq.html">fd_raoq</a></span><span class="op">(</span>traits <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">site_sp_10000</span>, <span class="va">dist_traits_birds</span><span class="op">)</span>,
  times <span class="op">=</span> <span class="fl">30</span>
<span class="op">)</span>

<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">autoplot</span><span class="op">(</span><span class="va">bench_sites_raoq</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="fd-bench-sites-raoq-1.png" alt=""><p class="caption">Performance comparison of <code><a href="../reference/fd_raoq.html">fd_raoq()</a></code> with increasing number of sites.</p>
</div>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bench_sites_raoq</span>
<span class="co">#&gt; Unit: milliseconds</span>
<span class="co">#&gt;         expr         min          lq        mean      median          uq</span>
<span class="co">#&gt;     sites_10    2.112920    2.154272    2.288917    2.296098    2.343092</span>
<span class="co">#&gt;    sites_100    3.789227    3.864212    3.992173    3.968257    4.041239</span>
<span class="co">#&gt;   sites_1000   55.175442   55.383814   56.669029   55.638584   56.947432</span>
<span class="co">#&gt;  sites_10000 4312.514478 4338.128182 4410.714754 4358.184948 4464.601279</span>
<span class="co">#&gt;          max neval</span>
<span class="co">#&gt;     2.668534    30</span>
<span class="co">#&gt;     4.461268    30</span>
<span class="co">#&gt;    67.522244    30</span>
<span class="co">#&gt;  4779.828554    30</span></code></pre></div>
</div>
<div id="functional-evenness-1" class="section level3">
<h3 class="hasAnchor">
<a href="#functional-evenness-1" class="anchor"></a>Functional Evenness</h3>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bench_sites_feve</span> <span class="op">=</span> <span class="fu">microbenchmark</span><span class="fu">::</span><span class="fu">microbenchmark</span><span class="op">(</span>
  sites_10    <span class="op">=</span> <span class="fu"><a href="../reference/fd_feve.html">fd_feve</a></span><span class="op">(</span>traits <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">site_sp_birds</span>, <span class="va">dist_traits_birds</span><span class="op">)</span>,
  sites_100   <span class="op">=</span> <span class="fu"><a href="../reference/fd_feve.html">fd_feve</a></span><span class="op">(</span>traits <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">site_sp_100</span>,   <span class="va">dist_traits_birds</span><span class="op">)</span>,
  sites_1000  <span class="op">=</span> <span class="fu"><a href="../reference/fd_feve.html">fd_feve</a></span><span class="op">(</span>traits <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">site_sp_1000</span>,  <span class="va">dist_traits_birds</span><span class="op">)</span>,
  sites_10000 <span class="op">=</span> <span class="fu"><a href="../reference/fd_feve.html">fd_feve</a></span><span class="op">(</span>traits <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">site_sp_10000</span>, <span class="va">dist_traits_birds</span><span class="op">)</span>,
  times <span class="op">=</span> <span class="fl">30</span>
<span class="op">)</span>

<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">autoplot</span><span class="op">(</span><span class="va">bench_sites_feve</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="fd-bench-sites-feve-1.png" alt=""><p class="caption">Performance comparison of <code><a href="../reference/fd_feve.html">fd_feve()</a></code> with increasing number of sites</p>
</div>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bench_sites_feve</span>
<span class="co">#&gt; Unit: milliseconds</span>
<span class="co">#&gt;         expr         min          lq        mean      median          uq</span>
<span class="co">#&gt;     sites_10    12.24903    12.70803    14.46647    13.31675    14.35541</span>
<span class="co">#&gt;    sites_100   126.72293   128.35813   142.86502   142.38425   148.60638</span>
<span class="co">#&gt;   sites_1000  1277.43253  1296.88690  1463.10708  1403.18114  1557.15906</span>
<span class="co">#&gt;  sites_10000 12936.34158 12995.46604 14468.71806 14516.52888 15912.05039</span>
<span class="co">#&gt;          max neval</span>
<span class="co">#&gt;     28.54224    30</span>
<span class="co">#&gt;    182.70304    30</span>
<span class="co">#&gt;   2033.28888    30</span>
<span class="co">#&gt;  16739.33083    30</span></code></pre></div>
</div>
<div id="comparing-between-indices-1" class="section level3">
<h3 class="hasAnchor">
<a href="#comparing-between-indices-1" class="anchor"></a>Comparing between indices</h3>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">all_bench_sites</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>fric <span class="op">=</span> <span class="va">bench_sites_fric</span>,
                        fdiv <span class="op">=</span> <span class="va">bench_sites_fdiv</span>,
                        raoq <span class="op">=</span> <span class="va">bench_sites_raoq</span>,
                        feve <span class="op">=</span> <span class="va">bench_sites_feve</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">bind_rows</span><span class="op">(</span>.id <span class="op">=</span> <span class="st">"fd_index"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>n_sites <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"sites"</span>, <span class="st">""</span>, <span class="va">expr</span><span class="op">)</span> <span class="op">%&gt;%</span>
           <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre class="collapsable-warnings"><code>#&gt; Warning: Problem with `mutate()` input `n_sites`.
#&gt; ℹ NAs introduced by coercion
#&gt; ℹ Input `n_sites` is `gsub("sites", "", expr) %&gt;% as.numeric()`.

all_bench_sites %&gt;%
  ggplot(aes(n_sites, time * 1e-9, color = fd_index)) +
  geom_point(alpha = 1/3) +
  geom_smooth() +
  scale_x_log10() +
  scale_y_log10() +
  scale_color_brewer(type = "qual",
                     labels = c(fric = "FRic", fdiv = "FDiv", raoq = "Rao's Q",
                                feve = "FEve")) +
  labs(title = "Performance comparison between indices",
       x = "# of sites", y = "Time (in seconds)",
       color = "FD index") +
  theme_bw() +
  theme(aspect.ratio = 1)</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning: Removed 480 rows containing non-finite values (stat_smooth).</code></pre>
<pre class="collapsable-warnings"><code>#&gt; Warning: Removed 480 rows containing missing values (geom_point).</code></pre>
<div class="figure">
<img src="fd-bench-sites-compare-1.png" alt=""><p class="caption">Performance comparison between functions for distinct indices in <code>fundiversity</code> with increasing number of sites. Smoothed trend lines and standard error enveloppes ares shown.</p>
</div>
<details><p><summary>Session info of the machine on which the benchmark was ran and time it took to run</summary></p>
<pre><code>#&gt;  seconds needed to generate this document: 2810.983 sec elapsed
#&gt; ─ Session info ───────────────────────────────────────────────────────────────
#&gt;  setting  value                       
#&gt;  version  R version 4.0.2 (2020-06-22)
#&gt;  os       CentOS Linux 7 (Core)       
#&gt;  system   x86_64, linux-gnu           
#&gt;  ui       X11                         
#&gt;  language (EN)                        
#&gt;  collate  en_US.UTF-8                 
#&gt;  ctype    en_US.UTF-8                 
#&gt;  tz       Europe/Paris                
#&gt;  date     2021-01-29                  
#&gt; 
#&gt; ─ Packages ───────────────────────────────────────────────────────────────────
#&gt;  package        * version    date       lib source        
#&gt;  abind            1.4-5      2016-07-21 [2] CRAN (R 4.0.2)
#&gt;  assertthat       0.2.1      2019-03-21 [1] CRAN (R 4.0.2)
#&gt;  cli              2.2.0      2020-11-20 [1] CRAN (R 4.0.2)
#&gt;  cluster          2.1.0      2019-06-19 [2] CRAN (R 4.0.2)
#&gt;  colorspace       2.0-0      2020-11-11 [1] CRAN (R 4.0.2)
#&gt;  crayon           1.3.4      2017-09-16 [1] CRAN (R 4.0.2)
#&gt;  DBI              1.1.0      2019-12-15 [1] CRAN (R 4.0.2)
#&gt;  digest           0.6.27     2020-10-24 [1] CRAN (R 4.0.2)
#&gt;  dplyr          * 1.0.3      2021-01-15 [1] CRAN (R 4.0.2)
#&gt;  ellipsis         0.3.1      2020-05-15 [1] CRAN (R 4.0.2)
#&gt;  evaluate         0.14       2019-05-28 [1] CRAN (R 4.0.2)
#&gt;  fansi            0.4.2      2021-01-15 [1] CRAN (R 4.0.2)
#&gt;  farver           2.0.3      2020-01-16 [1] CRAN (R 4.0.2)
#&gt;  fundiversity   * 0.0.0.9000 2021-01-29 [1] local         
#&gt;  generics         0.1.0      2020-10-31 [1] CRAN (R 4.0.2)
#&gt;  geometry         0.4.5      2019-12-04 [1] CRAN (R 4.0.2)
#&gt;  ggplot2        * 3.3.3      2020-12-30 [1] CRAN (R 4.0.2)
#&gt;  glue             1.4.2      2020-08-27 [1] CRAN (R 4.0.2)
#&gt;  gtable           0.3.0      2019-03-25 [1] CRAN (R 4.0.2)
#&gt;  highr            0.8        2019-03-20 [1] CRAN (R 4.0.2)
#&gt;  knitr            1.30       2020-09-22 [1] CRAN (R 4.0.2)
#&gt;  lattice          0.20-41    2020-04-02 [2] CRAN (R 4.0.2)
#&gt;  lifecycle        0.2.0      2020-03-06 [1] CRAN (R 4.0.2)
#&gt;  magic            1.5-9      2018-09-17 [1] CRAN (R 4.0.2)
#&gt;  magrittr         2.0.1      2020-11-17 [1] CRAN (R 4.0.2)
#&gt;  MASS             7.3-51.6   2020-04-26 [2] CRAN (R 4.0.2)
#&gt;  Matrix           1.2-18     2019-11-27 [2] CRAN (R 4.0.2)
#&gt;  mgcv             1.8-31     2019-11-09 [2] CRAN (R 4.0.2)
#&gt;  microbenchmark   1.4-7      2019-09-24 [1] CRAN (R 4.0.2)
#&gt;  munsell          0.5.0      2018-06-12 [1] CRAN (R 4.0.2)
#&gt;  nlme             3.1-148    2020-05-24 [2] CRAN (R 4.0.2)
#&gt;  permute          0.9-5      2019-03-12 [1] CRAN (R 4.0.2)
#&gt;  pillar           1.4.7      2020-11-20 [1] CRAN (R 4.0.2)
#&gt;  pkgconfig        2.0.3      2019-09-22 [1] CRAN (R 4.0.2)
#&gt;  purrr            0.3.4      2020-04-17 [1] CRAN (R 4.0.2)
#&gt;  R6               2.5.0      2020-10-28 [1] CRAN (R 4.0.2)
#&gt;  RColorBrewer     1.1-2      2014-12-07 [1] CRAN (R 4.0.2)
#&gt;  Rcpp             1.0.6      2021-01-15 [1] CRAN (R 4.0.2)
#&gt;  rlang            0.4.10     2020-12-30 [1] CRAN (R 4.0.2)
#&gt;  scales           1.1.1      2020-05-11 [1] CRAN (R 4.0.2)
#&gt;  sessioninfo      1.1.1      2018-11-05 [1] CRAN (R 4.0.2)
#&gt;  stringi          1.5.3      2020-09-09 [1] CRAN (R 4.0.2)
#&gt;  stringr          1.4.0      2019-02-10 [1] CRAN (R 4.0.2)
#&gt;  tibble           3.0.5      2021-01-15 [1] CRAN (R 4.0.2)
#&gt;  tictoc           1.0        2014-06-17 [1] CRAN (R 4.0.2)
#&gt;  tidyselect       1.1.0      2020-05-11 [1] CRAN (R 4.0.2)
#&gt;  vctrs            0.3.6      2020-12-17 [1] CRAN (R 4.0.2)
#&gt;  vegan            2.5-7      2020-11-28 [1] CRAN (R 4.0.2)
#&gt;  withr            2.3.0      2020-09-22 [1] CRAN (R 4.0.2)
#&gt;  xfun             0.19       2020-10-30 [1] CRAN (R 4.0.2)
#&gt; 
#&gt; [1] /home/gruson/.local/share/R/x86_64-pc-linux-gnu-library/4.0
#&gt; [2] /usr/local/R-4.0.2/lib64/R/library</code></pre>
</details>
</div>
</div>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-Chao_Unifying_2014">
<p>Chao, Anne, Chun-Huo Chiu, and Lou Jost. 2014. “Unifying Species Diversity, Phylogenetic Diversity, Functional Diversity, and Related Similarity and Differentiation Measures Through Hill Numbers.” <em>Annual Review of Ecology, Evolution, and Systematics</em> 45 (1): 297–324. <a href="https://doi.org/10.1146/annurev-ecolsys-120213-091540">https://doi.org/10.1146/annurev-ecolsys-120213-091540</a>.</p>
</div>
<div id="ref-Debastiani_SYNCSA_2012">
<p>Debastiani, Vanderlei J., and Valério D. Pillar. 2012. “SYNCSAR Tool for Analysis of Metacommunities Based on Functional Traits and Phylogeny of the Community Components.” <em>Bioinformatics</em> 28 (15): 2067–8. <a href="https://doi.org/10.1093/bioinformatics/bts325">https://doi.org/10.1093/bioinformatics/bts325</a>.</p>
</div>
<div id="ref-Laliberte_FD_2014">
<p>Laliberté, Etienne, Pierre Legendre, and Bill Shipley. 2014. <em>FD: Measuring Functional Diversity from Multiple Traits, and Other Tools for Functional Ecology</em>.</p>
</div>
<div id="ref-Li_hillR_2018">
<p>Li, Daijiang. 2018. “hillR: Taxonomic, Functional, and Phylogenetic Diversity and Similarity Through Hill Numbers.” <em>Journal of Open Source Software</em> 3 (31): 1041. <a href="https://doi.org/10.21105/joss.01041">https://doi.org/10.21105/joss.01041</a>.</p>
</div>
<div id="ref-Pavoine_adiv_2020">
<p>Pavoine, Sandrine. 2020. “adiv: An R Package to Analyse Biodiversity in Ecology.” <em>Methods in Ecology and Evolution</em> 11 (9): 1106–12. <a href="https://doi.org/10.1111/2041-210X.13430">https://doi.org/10.1111/2041-210X.13430</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://rekyt.github.io/">Matthias Grenié</a>, <a href="https://www.normalesup.org/~hgruson/">Hugo Gruson</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
